{% extends 'base.html' %}

{% block content %}
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}


<ul class="tabs">
	<li><a href="#">Settings</a></li>
	<li><a href="#">Plugins</a></li>
</ul>

<!-- tab "panes" -->
<div class="panes">
	<div>
      <table border="1" cellspacing="0" cellpadding="0">
      <tr>
          <th>No</th>
          <th>DocCode Validator</th>
          <th>Storage</th>
          <th>Securities</th>
          <th>Validators</th>
          <th>Active</th>
          <th>Edit</th>
      </tr>
      {% for rule in rule_list %}
      <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ rule.get_doccode.name }} - {{ rule.get_doccode.description }}</td>
          <td>{{ rule.get_storage.name }}</td>
          <td>
          <ul>
          {% for security in rule.get_securities %}
            <li>{{ security.name }}
            {% if security.has_configuration and security.active %}
             - <a href="{% url plugin_setting rule.id 'security' forloop.counter0 %}">configure</a>
            {% endif %}
            {% if security.active %}
              (active | <a href="{% url toggle_securities_plugin rule.id forloop.counter0 %}">toggle</a>)
            {% else %}
              (disabled | <a href="{% url toggle_securities_plugin rule.id forloop.counter0 %}">toggle</a>)
            {% endif %}
            </li>
          {% empty %}
            <li>None</li>
          {% endfor %}
          </ul>
          </td>
          <td>
          <ul>
          {% for validator in rule.get_validators %}
            <li>{{ validator.name }}
            {% if validator.has_configuration and validator.active %}
             - <a href="{% url plugin_setting rule.id 'validator' forloop.counter0 %}">configure</a>
            {% endif %}
            {% if validator.active %}
              (active | <a href="{% url toggle_validators_plugin rule.id forloop.counter0 %}">toggle</a>)
            {% else %}
              (disabled | <a href="{% url toggle_validators_plugin rule.id forloop.counter0 %}">toggle</a>)
            {% endif %}
            </li>
          {% empty %}
            <li>None</li>
          {% endfor %}
          </ul>
          </td>
          <td>{{ rule.active }} | <a href="{% url toggle_rule_state rule.id %}">toggle</a></td>
          <td><a href="{% url edit_setting rule.id %}">Edit</a></td>
      </tr>
      {% endfor %}
  </table>
  <h2>Add new rule</h2>
  <form action="" method="post">
      {{ form.as_p }}
      <p><input type="submit" value="Continue &rarr;" /></p>
  </form>

	</div>
	<div>pane 2 content</div>
</div>
{% endblock %}

